<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
    // 在开始排序之前， 我们先创建一个数组(列表) 来表示带排序和搜索的数据结构
    function ArrayList() {
        var array = [];  // (1)

        this.insert = function(item) {// (2)
            array.push(item)
        }

        this.toString = function() { // (3)
            return array.join()
        }
        // join 方法拼接数组元素至 一个字符串， 并返回该字符串

        // 此时我们完成了 ArrayList 类的创建

        // 我们将开始冒泡排序的学习
        // 冒泡排序比较任何两个相邻的项，如果第一个比第二个大，则交换它们。元素项向上
        // 移动至正确的顺序， 就好像气泡升至表面一样，冒泡排序因此得名

        // 让我们来实现一下 冒泡排序

        this.bubbleSort = function(){
            var length = array.length;   // (1)
            for (var i = 0; i<length; i++) {  // (2)
                for (var j = 0; j<length-1; j++) { // (3)
                    if (array[j] > array[j+1]) {  // (4)
                        swap(j, j+1)  // (5)
                    }
                }
            }
        }

        

        // 对上述过程做一个解释：
        /**
        1. 首先声明一个名为 length 的变量，用来存储数组的长度(可选)。它能帮助我们在行(2)(3)直接使用数组的长度
        2. 外循环会从数组的第一位迭代至最后一位， 它控制了在数组中经过多少轮排序(应该是数组中每一项都经过一轮，轮数和数组长度一致)
        3. 内循环将从第一位迭代至倒数第二位，内循环实际上进行当前项和下一项的比较(4)
        4. 如果这两项顺序不对(当前项比下一项大) 则交换它们(5) 意思是位置为 j+1 的值将会被换置到位置 j 处
        */

        // 改进后的冒泡排序
        // 如果用内循环减去外循环中已经跑过的轮数，就可以避免内循环中所有不必要的比较
        this.modifiedBubbleSort = function() {
            var length = array.length
            for (var i = 0; i < length; i++) {
                for (var j = 0; j < length-1-i; j++) {
                    if (array[j] > array[j+1]) {
                        swap(j, j+1)
                    }
                }
            }
        }
        // 即使我们做了这个小改变，改进一下冒泡排序算法，但是我们还是不推荐该算法
        // 它的时间复杂度是 O(n^2)


        // 现在我们地声明一个 swap() 函数
        var swap = function(index1, index2) {
            var aux = array[index1]
            array[index1] = array[index2]
            array[index2] = aux
        }


    }

    // 用代码来测试
    // 创建一个函数来自动创建一个未排序的数组
    function createNonSortedArray(size) {
        var array = new ArrayList()
        for (var i = size; i>0; i--) {
            array.insert(i)
        }
        return array
    }

    var array = createNonSortedArray(5)
    console.log(array.toString())
    console.log(Array.toString())
    array.bubbleSort()
    console.log(array.toString())

    // [5,4,3,2,1]
    // output : function Array() { [native code] }
    //          [1,2,3,4,5]

    
    </script>
</body>
</html>